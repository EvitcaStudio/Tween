class Tween{constructor({start:t={},end:e={},duration:n=1e3,easing:s=Tween.linear}={}){this.start=t,this.end=e,this.duration=n,this.easing="function"==typeof s?s:Tween.linear,this.events={},this.tweening=!1,this.update=null,this.paused=!1,this.lastTime=0,this.elapsed=0}static linear=function(t,e,n,s){return n*t/s+e};static easeInQuad=function(t,e,n,s){return n*(t/=s)*t+e};static easeOutQuad=function(t,e,n,s){return-n*(t/=s)*(t-2)+e};static easeInOutQuad=function(t,e,n,s){return(t/=s/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e};static easeInSine=function(t,e,n,s){return-n*Math.cos(t/s*(Math.PI/2))+n+e};static easeOutSine=function(t,e,n,s){return n*Math.sin(t/s*(Math.PI/2))+e};static easeInOutSine=function(t,e,n,s){return-n/2*(Math.cos(Math.PI*t/s)-1)+e};static easeInExpo=function(t,e,n,s){return 0==t?e:n*Math.pow(2,10*(t/s-1))+e};static easeOutExpo=function(t,e,n,s){return t==s?e+n:n*(-Math.pow(2,-10*t/s)+1)+e};static easeInOutExpo=function(t,e,n,s){return 0==t?e:t==s?e+n:(t/=s/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e};static easeInCirc=function(t,e,n,s){return-n*(Math.sqrt(1-(t/=s)*t)-1)+e};static easeOutCirc=function(t,e,n,s){return n*Math.sqrt(1-(t=t/s-1)*t)+e};static easeInOutCirc=function(t,e,n,s){return(t/=s/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e};static easeInCubic=function(t,e,n,s){return n*(t/=s)*t*t+e};static easeOutCubic=function(t,e,n,s){return n*((t=t/s-1)*t*t+1)+e};static easeInOutCubic=function(t,e,n,s){return(t/=s/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e};static easeInQuart=function(t,e,n,s){return n*(t/=s)*t*t*t+e};static easeOutQuart=function(t,e,n,s){return-n*((t=t/s-1)*t*t*t-1)+e};static easeInOutQuart=function(t,e,n,s){return(t/=s/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e};static easeInQuint=function(t,e,n,s){return n*(t/=s)*t*t*t*t+e};static easeOutQuint=function(t,e,n,s){return n*((t=t/s-1)*t*t*t*t+1)+e};static easeInOutQuint=function(t,e,n,s){return(t/=s/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e};static easeInElastic=function(t,e,n,s){var i=1.70158,a=0,r=n;if(0==t)return e;if(1==(t/=s))return e+n;if(a||(a=.3*s),r<Math.abs(n)){r=n;var i=a/4}else if(0===n&&0===r)i=a/(2*Math.PI)*Math.asin(1);else var i=a/(2*Math.PI)*Math.asin(n/r);return-(r*Math.pow(2,10*(t-=1))*Math.sin((t*s-i)*(2*Math.PI)/a))+e};static easeOutElastic=function(t,e,n,s){var i=1.70158,a=0,r=n;if(0==t)return e;if(1==(t/=s))return e+n;if(a||(a=.3*s),r<Math.abs(n)){r=n;var i=a/4}else if(0===n&&0===r)i=a/(2*Math.PI)*Math.asin(1);else var i=a/(2*Math.PI)*Math.asin(n/r);return r*Math.pow(2,-10*t)*Math.sin((t*s-i)*(2*Math.PI)/a)+n+e};static easeInOutElastic=function(t,e,n,s){var i=1.70158,a=0,r=n;if(0==t)return e;if(2==(t/=s/2))return e+n;if(a||(a=s*(.3*1.5)),r<Math.abs(n)){r=n;var i=a/4}else if(0===n&&0===r)i=a/(2*Math.PI)*Math.asin(1);else var i=a/(2*Math.PI)*Math.asin(n/r);return t<1?-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t*s-i)*(2*Math.PI)/a))+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*s-i)*(2*Math.PI)/a)*.5+n+e};static easeInBack=function(t,e,n,s){return n*(t/=s)*t*(2.70158*t-1.70158)+e};static easeOutBack=function(t,e,n,s){return n*((t=t/s-1)*t*(2.70158*t+1.70158)+1)+e};static easeInOutBack=function(t,e,n,s){var i=1.70158;return(t/=s/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e};static easeInBounce=function(t,e,n,s){return n-this.easeOutBounce(s-t,0,n,s)+e};static easeOutBounce=function(t,e,n,s){return(t/=s)<1/2.75?7.5625*n*t*t+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e};static easeInOutBounce=function(t,e,n,s){return t<.5*s?.5*this.easeInBounce(2*t,0,n,s)+e:.5*this.easeOutBounce(2*t-s,0,n,s)+.5*n+e};static _clamp(t,e=0,n=1){return Math.max(e,Math.min(t,n))}static _hexToRgb(t){3===(t=t.replace("#","")).length&&(t=t.replace(RegExp("(.)","g"),"$1$1")),t=t.match(RegExp("..","g"));let e=Tween._clamp(parseInt(t[0],16),0,255),n=Tween._clamp(parseInt(t[1],16),0,255),s=Tween._clamp(parseInt(t[2],16),0,255);return[e,n,s]}static _rgbToHex(t){if(Array.isArray(t))return"#"+t.map(t=>Math.abs(Math.round(t)).toString(16).padStart(2,"0")).join("")}on(t,e){if("function"==typeof e)switch(t){case"start":case"end":case"pause":case"resume":this.events[t]=e;break;default:console.error(`The event "${t}" is not supported.`)}else console.error(`The callback for event "${t}" is not a function.`);return this}animationFrame=()=>{if(!this.tweening||this.paused)return;let t=performance.now();this.lastTime||(this.lastTime=t),this.elapsed+=t-this.lastTime;let e=this.elapsed/this.duration;this.oscillating&&(e=(1-Math.cos(e*Math.PI))/2),e>1&&(e=1);let n={};for(let s in this.end){let i=this.start[s],a=this.end[s];if("string"==typeof i&&(3===i.length||6===i.length)||4===i.length||7===i.length){i=Tween._hexToRgb(i),a=Tween._hexToRgb(a);let r=[this.easing(e,i[0],a[0]-i[0],1),this.easing(e,i[1],a[1]-i[1],1),this.easing(e,i[2],a[2]-i[2],1)];n[s]=Tween._rgbToHex(r)}else n[s]=this.easing(e,i,a-i,1)}this.update(n),1!==e||this.oscillating?requestAnimationFrame(this.animationFrame):(this.stop(),this.events.end&&this.events.end()),this.lastTime=t};animate(t,e=!1){if("function"!=typeof t){console.error("The pUpdate parameter passed to animate is not a function.");return}if(this.tweening)return;let n=Object.keys(this.start),s=Object.keys(this.end);if(!n.length||!s.length){console.error("The start object or the end object has no properties.");return}if(!n.every(t=>s.includes(t))){console.error("The end object is missing properties that the start object has.");return}return this.update=t,this.tweening=!0,this.elapsed=0,this.oscillating=e,this.events.start&&this.events.start(),requestAnimationFrame(this.animationFrame),this}resume(){return this.paused&&(this.lastTime=performance.now(),this.paused=!1,this.events.resume&&this.events.resume(),requestAnimationFrame(this.animationFrame)),this}pause(){return!this.paused&&(this.paused=!0,this.events.pause&&this.events.pause()),this}stop(){this.tweening=!1,this.oscillating=!1,this.update=null,this.elapsed=0,this.lastTime=0,this.paused=!1}}